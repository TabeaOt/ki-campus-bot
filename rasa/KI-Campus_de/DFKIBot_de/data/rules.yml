version: '3.0'

rules:
# course search
  - rule: activate course form
    steps:
      - intent: start_coursesearch_form # intent that triggers form activation
      - action: utter_introduce_coursesearch_form
      - action: coursesearch_form      # run the form
      - active_loop: coursesearch_form # this form is active

  - rule: submit course form
    condition:
    - active_loop: coursesearch_form   # this form must be active
    steps:
      - action: coursesearch_form      # run the form
      - active_loop: null            # the form is no longer active because it has been filled
      - action: utter_submit_coursesearch_form
      - action: utter_slots_values   # action to take after the form is complete

  - rule: restart conversation
    steps:
      - intent: restart
      - action: action_restart
